<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE MudletPackage>
<MudletPackage version="1.0">
    <TriggerPackage>
        <TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
            <name>MajorMud</name>
            <script></script>
            <triggerType>0</triggerType>
            <conditonLineDelta>0</conditonLineDelta>
            <mStayOpen>0</mStayOpen>
            <mCommand></mCommand>
            <packageName></packageName>
            <mFgColor>#ff0000</mFgColor>
            <mBgColor>#ffff00</mBgColor>
            <mSoundFile></mSoundFile>
            <colorTriggerFgColor>#000000</colorTriggerFgColor>
            <colorTriggerBgColor>#000000</colorTriggerBgColor>
            <regexCodeList/>
            <regexCodePropertyList/>
            <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>Get Gold</name>
                <script>send(&quot;g silver;g copper;g gold;rest;exp&quot;)</script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList>
                    <string>You gain</string>
                </regexCodeList>
                <regexCodePropertyList>
                    <integer>0</integer>
                </regexCodePropertyList>
            </Trigger>
            <TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>HP</name>
                <script></script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList>
                    <string>HP=</string>
                </regexCodeList>
                <regexCodePropertyList>
                    <integer>0</integer>
                </regexCodePropertyList>
                <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                    <name>check health</name>
                    <script>health(tonumber(matches[2]),tonumber(matches[3]))
</script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>0</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#ffff00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#000000</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList>
                        <string>^\[HP=(\-*\d+)/..=(\d+)</string>
                    </regexCodeList>
                    <regexCodePropertyList>
                        <integer>1</integer>
                    </regexCodePropertyList>
                </Trigger>
                <Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                    <name>panic</name>
                    <script>if tonumber(matches[2]) &gt; HP_panic and tonumber(matches[2]) &gt; 10 then
	disableTrigger(&quot;panic&quot;)
	enableTrigger(&quot;healing&quot;)

	if autoEnterTrigger ~= nil then
		bg(&quot;DarkGreen&quot;)
		echo(&quot;enabling &quot;..tostring(autoEnterTrigger))
		bg(&quot;black&quot;)
		tableAutoEnter[autoEnterTrigger]()
	end
end</script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>0</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#ffaa00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#000000</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList>
                        <string>^\[HP=(\-*\d+)</string>
                    </regexCodeList>
                    <regexCodePropertyList>
                        <integer>1</integer>
                    </regexCodePropertyList>
                </Trigger>
                <Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                    <name>healing</name>
                    <script>hp = matches[2]
if tonumber(hp) &gt;= HP_healthSpell and tonumber(hp) &lt; HP_autoEnter then
	if HP_maheAvail ~= nil then
		send(HP_maheAvail..&quot;;rest&quot;)
	elseif HP_miheAvail ~= nil then
		send(HP_miheAvail..&quot;;rest&quot;)
	else
		send(&quot;rest&quot;)
	end
	disableTrigger(&quot;healing&quot;)
	tempTimer(7, [[enableTrigger(&quot;healing&quot;)]])
	echo(&quot;Healing until &quot;..HP_autoEnter..&quot;\n&quot;)
elseif tonumber(hp) &lt; HP_panic then
	Panic()
else
	if tonumber(hp) &gt; HP_autoEnter then
		disableTrigger(&quot;healing&quot;)
		enableTrigger(&quot;check health&quot;)
		health(hp)
	end
end</script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>0</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#ffff00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#000000</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList>
                        <string>^\[HP=(\-*\d+)</string>
                    </regexCodeList>
                    <regexCodePropertyList>
                        <integer>1</integer>
                    </regexCodePropertyList>
                </Trigger>
            </TriggerGroup>
            <TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>Towns</name>
                <script></script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList/>
                <regexCodePropertyList/>
                <TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                    <name>Hunts</name>
                    <script></script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>0</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#55ff00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#000000</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList>
                        <string>Also\shere</string>
                        <string>from</string>
                        <string>damage!</string>
                        <string>with\stheir</string>
                        <string>lunges at</string>
                    </regexCodeList>
                    <regexCodePropertyList>
                        <integer>1</integer>
                        <integer>0</integer>
                        <integer>0</integer>
                        <integer>1</integer>
                        <integer>0</integer>
                    </regexCodePropertyList>
                    <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>newhavenHunt</name>
                        <script>Hunt(matches[1])</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff5500</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>slime</string>
                            <string>filthbug</string>
                            <string>kobold</string>
                            <string>lashworm</string>
                            <string>carrion</string>
                            <string>giant rat</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                        </regexCodePropertyList>
                    </Trigger>
                    <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>slumsHunt</name>
                        <script>Hunt(matches[1])</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff5500</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>orc\s</string>
                            <string>thug</string>
                            <string>cultist</string>
                            <string>half-ogre</string>
                            <string>mercenary</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>1</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                        </regexCodePropertyList>
                    </Trigger>
                    <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>bearHunt</name>
                        <script>Hunt(&quot;bear&quot;)</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff5500</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>bear</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>0</integer>
                        </regexCodePropertyList>
                    </Trigger>
                    <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>darkcavernHunt</name>
                        <script>Hunt(matches[1])</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff5500</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>\sbat\s</string>
                            <string>spider</string>
                            <string>cleric</string>
                            <string>priest</string>
                            <string>abomination</string>
                            <string>\sworm</string>
                            <string>paladin</string>
                            <string>hellhound</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>1</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>1</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                        </regexCodePropertyList>
                    </Trigger>
                    <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>darkwoodforestHunt</name>
                        <script>Hunt(matches[1])</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff5500</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>dog</string>
                            <string>goblin</string>
                            <string>bandit</string>
                            <string>druid</string>
                            <string>bugbear\scaptain</string>
                            <string>kobold</string>
                            <string>wolf</string>
                            <string>warrior</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>1</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                            <integer>0</integer>
                        </regexCodePropertyList>
                    </Trigger>
                    <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="yes" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>narrowplateauHunt</name>
                        <script>Hunt(matches[1])</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff5500</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>\sroc</string>
                            <string>huntsman</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>1</integer>
                            <integer>0</integer>
                        </regexCodePropertyList>
                    </Trigger>
                </TriggerGroup>
                <Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                    <name>huntHold</name>
                    <script>HuntHold()
damage = 0</script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>0</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#ffff00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#000000</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList>
                        <string>Combat Off</string>
                        <string>You do not have enough</string>
                        <string>You do not see</string>
                    </regexCodeList>
                    <regexCodePropertyList>
                        <integer>0</integer>
                        <integer>0</integer>
                        <integer>0</integer>
                    </regexCodePropertyList>
                </Trigger>
                <TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                    <name>Auto Enters</name>
                    <script></script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>0</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#ffff00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#000000</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList/>
                    <regexCodePropertyList/>
                    <Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>auto enter bear</name>
                        <script>if tonumber(matches[2]) &gt;= HP_autoEnter then
	if current_room ~= 9 then
		echo(&quot;Must be above NewHaven arena\n&quot;)
	else
		ignoreTimer = true
		retreatSequence = &quot;s;s;u&quot;
		send(&quot;d;n;n&quot;)
		changeRoom(&quot;d&quot;)
		changeRoom(&quot;n&quot;)
		changeRoom(&quot;n&quot;)
		autoEnterTrigger = &quot;bear&quot;
	end
	disableTrigger(&quot;auto enter bear&quot;)
end</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff0000</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>^\[HP=(\d+)</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>0</integer>
                        </regexCodePropertyList>
                    </Trigger>
                    <Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>autoStrollCaveWorm</name>
                        <script>if tonumber(matches[2]) &gt;= HP_autoEnter then
	if current_room ~= 656 then
		echo(&quot;Loop must start at Slum Street Crossroads\nLoop will be unpaused\n&quot;) 
		walkLoop_pause = false
	else
		walkLoop_count = 1
		walkLoop_run = true
		walkLoop_pause = false
		walkLoop(darkcavern3Loop,10)
		autoEnterTrigger = &quot;caveworm&quot;
	end
	disableTrigger(&quot;autoStrollCaveWorm&quot;)
end</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff0000</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>^\[HP=(\d+)</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>1</integer>
                        </regexCodePropertyList>
                    </Trigger>
                    <Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>auto Stroll Slums</name>
                        <script>if tonumber(matches[2]) &gt;= HP_autoEnter then
	disableTrigger(&quot;auto Stroll Slums&quot;)
	if current_room ~= 289 and current_room ~= 427 then
		enableTrigger(&quot;auto Stroll Slums&quot;)
	elseif current_room == 427 then
		walkLoop_count = 1
		walkLoop_run = true
		walkLoop(slums2Loop,10)
		autoEnterTrigger = &quot;bodyguard slums&quot;
	else
		walkLoop_count = 1
		walkLoop_run = true
		walkLoop(slumsLoop,5)
		autoEnterTrigger = &quot;slums&quot;
	end
end</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff0000</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>^\[HP=(\d+)</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>1</integer>
                        </regexCodePropertyList>
                    </Trigger>
                    <Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                        <name>auto enter newhaven</name>
                        <script>if tonumber(matches[2]) &gt;= HP_autoEnter then
	if current_room ~= 9 then
		echo(&quot;Must be above NewHaven arena\n&quot;)
	else
		last_movement = &quot;d&quot;
		send(last_movement)
		changeRoom(last_movement)
		autoEnterTrigger = &quot;newhaven&quot;
	end
	disableTrigger(&quot;auto enter newhaven&quot;)
end
	</script>
                        <triggerType>0</triggerType>
                        <conditonLineDelta>0</conditonLineDelta>
                        <mStayOpen>0</mStayOpen>
                        <mCommand></mCommand>
                        <packageName></packageName>
                        <mFgColor>#ff0000</mFgColor>
                        <mBgColor>#ffff00</mBgColor>
                        <mSoundFile></mSoundFile>
                        <colorTriggerFgColor>#000000</colorTriggerFgColor>
                        <colorTriggerBgColor>#000000</colorTriggerBgColor>
                        <regexCodeList>
                            <string>^\[HP=(\d+)</string>
                        </regexCodeList>
                        <regexCodePropertyList>
                            <integer>1</integer>
                        </regexCodePropertyList>
                    </Trigger>
                </TriggerGroup>
            </TriggerGroup>
            <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>Chat</name>
                <script>selectCurrentLine()
echo(&quot;chat&quot;,getTimestamp(getLineCount()))
copy()
appendBuffer(&quot;chat&quot;)</script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList>
                    <string>say</string>
                    <string>gossip</string>
                    <string>whisper</string>
                    <string>telepaths</string>
                </regexCodeList>
                <regexCodePropertyList>
                    <integer>0</integer>
                    <integer>0</integer>
                    <integer>0</integer>
                    <integer>0</integer>
                </regexCodePropertyList>
            </Trigger>
            <TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>AutoMap</name>
                <script></script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList/>
                <regexCodePropertyList/>
                <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="yes" isColorTriggerFg="yes" isColorTriggerBg="yes">
                    <name>Name_Line</name>
                    <script>--handle list
if matches[1]:findPattern(&quot;Quantity&quot;) ~= nil then
	disableTrigger(&quot;Name_Line&quot;)
	tempTimer(1, [[enableTrigger(&quot;Name_Line&quot;)]])
	return
end
if matches[1]:findPattern(&quot;%d&quot;) ~= nil or matches[1]:find(&quot;You&quot;) ~= nil or matches[1]:find(&quot;you&quot;) ~= nil or matches[1]:find(&quot;The&quot;) ~= nil then return end

if matches[1]:find(&quot;dark&quot;) then enteredRoom(&quot;&quot;,nil) setRoomEnv(current_room,272) return end

disableTrigger(&quot;Name_Line&quot;)
enableTrigger(&quot;Exit_Line&quot;)

if manual_map then return end

enteredRoom(matches[1],nil)</script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>1</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#ffff00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#00ff00</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList>
                        <string>FG14BG2</string>
                        <string>very\sdark</string>
                    </regexCodeList>
                    <regexCodePropertyList>
                        <integer>6</integer>
                        <integer>1</integer>
                    </regexCodePropertyList>
                </Trigger>
                <Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="yes" isColorTriggerFg="yes" isColorTriggerBg="no">
                    <name>Exit_Line</name>
                    <script>disableTrigger(&quot;Exit_Line&quot;)
enableTrigger(&quot;Name_Line&quot;)
</script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>0</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#ffff00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#00ff00</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList>
                        <string>^Obvious\sexits:\s(.*)</string>
                    </regexCodeList>
                    <regexCodePropertyList>
                        <integer>1</integer>
                    </regexCodePropertyList>
                </Trigger>
                <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                    <name>NewRoom</name>
                    <script>if not matches[1]:find(&quot;very dark&quot;) then roam(matches[2]) end
disableTimer(&quot;backtrack&quot;)
walkCount = walkCount + 1 
</script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>0</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#ffff00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#000000</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList>
                        <string>^Obvious\sexits:\s(.*)</string>
                        <string>The room is very dark</string>
                    </regexCodeList>
                    <regexCodePropertyList>
                        <integer>1</integer>
                        <integer>0</integer>
                    </regexCodePropertyList>
                </Trigger>
                <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                    <name>Followed</name>
                    <script>local littleDir = matches[2]:sub(1,1)
if littleDir == &quot;n&quot; or littleDir == &quot;s&quot; then
	if matches[2]:find(&quot;e&quot;) then
		littleDir = littleDir..&quot;e&quot;
	elseif matches[2]:find(&quot;w&quot;) then
		littleDir = littleDir..&quot;w&quot;
	end
end
disableTrigger(&quot;Name_Line&quot;)
changeRoom(littleDir)
last_movement = littleDir
enableTrigger(&quot;Exit_Line&quot;)</script>
                    <triggerType>0</triggerType>
                    <conditonLineDelta>0</conditonLineDelta>
                    <mStayOpen>0</mStayOpen>
                    <mCommand></mCommand>
                    <packageName></packageName>
                    <mFgColor>#ff0000</mFgColor>
                    <mBgColor>#ffff00</mBgColor>
                    <mSoundFile></mSoundFile>
                    <colorTriggerFgColor>#000000</colorTriggerFgColor>
                    <colorTriggerBgColor>#000000</colorTriggerBgColor>
                    <regexCodeList>
                        <string>Following\syour\sParty\sleader\s(.*)\s--$</string>
                    </regexCodeList>
                    <regexCodePropertyList>
                        <integer>1</integer>
                    </regexCodePropertyList>
                </Trigger>
            </TriggerGroup>
            <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>Experience</name>
                <script>setGauge(&quot;EXP&quot;,tonumber(matches[2]),tonumber(matches[5]),&quot;Exp &quot;..matches[2]..&quot;/&quot;..matches[5])
totExp = totExp + (tonumber(matches[2]) - prevExp)
prevExp = tonumber(matches[2])
</script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList>
                    <string>Exp:\s(\d+) Level: (\d+) Exp needed for next level: (\d+) \((\d+)\) </string>
                </regexCodeList>
                <regexCodePropertyList>
                    <integer>1</integer>
                </regexCodePropertyList>
            </Trigger>
            <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="yes" isColorTriggerFg="yes" isColorTriggerBg="no">
                <name>Damage</name>
                <script>damage = damage + tonumber(matches[2])
echo(&quot;DAMAGE&quot;,&quot;DAMAGE: &quot;..damage)</script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#800000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList>
                    <string>You\s.*\s(\d+)\s.*damage\!$</string>
                </regexCodeList>
                <regexCodePropertyList>
                    <integer>1</integer>
                </regexCodePropertyList>
            </Trigger>
            <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>Auto Follow</name>
                <script>send(&quot;follow &quot;..matches[2])</script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList>
                    <string>^(.*)\shas\sinvited\syou </string>
                </regexCodeList>
                <regexCodePropertyList>
                    <integer>1</integer>
                </regexCodePropertyList>
            </Trigger>
            <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>AutoInvite</name>
                <script>-- Auto Enter script:
local autoEnter = &quot;bodyguard slums&quot;

tempTimer(660,[[send(&quot;invite ethereal;invite pile;invite unhappy;invite captain&quot;)]])

if autoEnter ~= nil then
	tempTimer(700,[[tableAutoEnter[&quot;]]..autoEnter..[[&quot;]()]])
end</script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#005500</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList>
                    <string>*ANSI RECOMMENDED*</string>
                </regexCodeList>
                <regexCodePropertyList>
                    <integer>0</integer>
                </regexCodePropertyList>
            </Trigger>
            <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="yes" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>Cleanup</name>
                <script>walkLoop_run = false
tempTimer(60,[[disconnect()]])
</script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList>
                    <string>Sorry to interrupt here, but the server will be shutting</string>
                </regexCodeList>
                <regexCodePropertyList>
                    <integer>1</integer>
                </regexCodePropertyList>
            </Trigger>
            <Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
                <name>Any Key</name>
                <script>send(&quot;\n&quot;)</script>
                <triggerType>0</triggerType>
                <conditonLineDelta>0</conditonLineDelta>
                <mStayOpen>0</mStayOpen>
                <mCommand></mCommand>
                <packageName></packageName>
                <mFgColor>#ff0000</mFgColor>
                <mBgColor>#ffff00</mBgColor>
                <mSoundFile></mSoundFile>
                <colorTriggerFgColor>#000000</colorTriggerFgColor>
                <colorTriggerBgColor>#000000</colorTriggerBgColor>
                <regexCodeList>
                    <string>Hit any key to continue</string>
                </regexCodeList>
                <regexCodePropertyList>
                    <integer>0</integer>
                </regexCodePropertyList>
            </Trigger>
        </TriggerGroup>
    </TriggerPackage>
    <TimerPackage>
        <Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
            <name>Combat</name>
            <script>CombatTimer = true
disableTimer(&quot;combat&quot;)
send(&quot;rest&quot;)</script>
            <command></command>
            <packageName></packageName>
            <time>00:01:00.000</time>
        </Timer>
        <Timer isActive="yes" isFolder="no" isTempTimer="no" isOffsetTimer="no">
            <name>Heartbeat</name>
            <script>echo(&quot;RECON&quot;)
reConn()
</script>
            <command></command>
            <packageName></packageName>
            <time>00:10:00.000</time>
        </Timer>
        <Timer isActive="yes" isFolder="no" isTempTimer="no" isOffsetTimer="no">
            <name>AtTheTone</name>
            <script>cecho(&quot;                    &lt;:dark_olive_green&gt;========= &quot;..getTime(true)..&quot; =========\n&quot;)
</script>
            <command></command>
            <packageName></packageName>
            <time>00:03:00.000</time>
        </Timer>
        <Timer isActive="yes" isFolder="no" isTempTimer="no" isOffsetTimer="no">
            <name>expCalc</name>
            <script>local expPerHour = totExp * 6
cecho(&quot;                    &lt;:SteelBlue&gt;========= Exp per Hour: &quot;..expPerHour..&quot; =========\n&quot;)
echo(&quot;EXPpHR&quot;,expPerHour..&quot; Exp/hr&quot;)
totExp = 0</script>
            <command></command>
            <packageName></packageName>
            <time>00:10:00.000</time>
        </Timer>
        <Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
            <name>backtrack</name>
            <script>-- Try to keep map loaction correct, roll back move if move didn't happen
walkLoop_run = false
changeRoom(inverseDirection(last_movement))
disableTimer(&quot;backtrack&quot;)
echo(&quot;I didn't move, reverting position.\n&quot;)</script>
            <command></command>
            <packageName></packageName>
            <time>00:00:04.500</time>
        </Timer>
        <Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
            <name>debug print</name>
            <script>echo(&quot;walk loop pause: &quot;..tostring(walkLoop_pause)..&quot; walk loop run: &quot;..tostring(walkLoop_run)..&quot;\n&quot;)
echo(&quot;walk count: &quot;..walkCount..&quot; speed walk steps: &quot;..table.size(speedWalkPath)..&quot;\n&quot;)
</script>
            <command></command>
            <packageName></packageName>
            <time>00:00:05.000</time>
        </Timer>
    </TimerPackage>
    <AliasPackage>
        <AliasGroup isActive="yes" isFolder="yes">
            <name>MajorMud</name>
            <script></script>
            <command></command>
            <packageName></packageName>
            <regex></regex>
            <Alias isActive="yes" isFolder="no">
                <name>Stats</name>
                <script>send(&quot;st;exp;wealth;spells&quot;)</script>
                <command></command>
                <packageName></packageName>
                <regex>^stats$</regex>
            </Alias>
            <Alias isActive="yes" isFolder="no">
                <name>Enable Trigger</name>
                <script>trigName = matches[2]
enableTrigger(trigName)</script>
                <command></command>
                <packageName></packageName>
                <regex>^enable trigger (.*)$</regex>
            </Alias>
            <AliasGroup isActive="yes" isFolder="yes">
                <name>Towns</name>
                <script></script>
                <command></command>
                <packageName></packageName>
                <regex></regex>
                <Alias isActive="yes" isFolder="no">
                    <name>Prep For Monsters</name>
                    <script>if current_room == nil then echo(&quot;I don't know where I am.\n&quot;) return end

prep()
</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^prep$</regex>
                </Alias>
                <Alias isActive="yes" isFolder="no">
                    <name>Auto Enter Arena</name>
                    <script>if current_room == nil then echo(&quot;I don't know where I am.\n&quot;) return end

--disable any existing auto enters
if autoEnterTrigger ~= nil then
	autoEnterTrigger = nil
end

--enable correct auto enter
tableAutoEnter[matches[2]]()

</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^auto enter (.*)$</regex>
                </Alias>
                <Alias isActive="yes" isFolder="no">
                    <name>Disable Auto Enter</name>
                    <script>if autoEnterTrigger ~= nil then
	echo(tostring(autoEnterTrigger)..&quot; disabled\n&quot;)
	autoEnterTrigger = nil
	walkLoop_run = false
	walkLoop_pause = false
	autoEnterTrigger = nil
	roamDirection = nil
else
	echo(&quot;Auto enter already disabled\n&quot;)
end
</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^disable auto enter$</regex>
                </Alias>
                <Alias isActive="yes" isFolder="no">
                    <name>UnPrep for Monsters</name>
                    <script>if autoEnterTrigger ~= nil then
	echo(tostring(autoEnterTrigger)..&quot; disabled\n&quot;)
	autoEnterTrigger = nil
else
	echo(&quot;Auto enter already disabled\n&quot;)
end

if isActive(&quot;Hunts&quot;, &quot;trigger&quot;) == 1 then
	unPrep()
else
	echo(&quot;Already unpreped\n&quot;)
end</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^unprep$</regex>
                </Alias>
                <Alias isActive="yes" isFolder="no">
                    <name>Disable Retreat</name>
                    <script>retreatSequence = nil
</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^disable\sretreat$</regex>
                </Alias>
                <Alias isActive="yes" isFolder="no">
                    <name>Roam</name>
                    <script>roamDirection = matches[2]
send(matches[2])</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^roam\s(.+)$</regex>
                </Alias>
                <Alias isActive="yes" isFolder="no">
                    <name>Disable Roam</name>
                    <script>roamDirection = nil</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^disable\sroam$</regex>
                </Alias>
            </AliasGroup>
            <AliasGroup isActive="yes" isFolder="yes">
                <name>mapper</name>
                <script></script>
                <command></command>
                <packageName></packageName>
                <regex></regex>
                <Alias isActive="yes" isFolder="no">
                    <name>Moved</name>
                    <script>last_movement = matches[2]

if manual_map then
	enteredRoom(&quot;&quot;,nil)
else
	send(matches[2])
end</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^(n|s|e|w|ne|nw|se|sw|u|d)$</regex>
                </Alias>
                <Alias isActive="yes" isFolder="no">
                    <name>Map Utilities</name>
                    <script>mapControl(matches[2])</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^map\s(.*)$</regex>
                </Alias>
                <Alias isActive="yes" isFolder="no">
                    <name>Movement Blocker</name>
                    <script>disableTrigger(&quot;Name_Line&quot;)
enableTrigger(&quot;Exit_Line&quot;)
send(matches[1])</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^(l)$</regex>
                </Alias>
                <Alias isActive="yes" isFolder="no">
                    <name>Special Exits</name>
                    <script>changeRoom(matches[1])

if not manual_map then
	send(matches[1])
end</script>
                    <command></command>
                    <packageName></packageName>
                    <regex>^go\s(.*)$</regex>
                </Alias>
            </AliasGroup>
            <Alias isActive="yes" isFolder="no">
                <name>Panic HangUp</name>
                <script>echo(&quot;Panic hangup changed from &quot;..tostring(HP_panicHangup)..&quot; to &quot;..matches[2]..&quot;\n&quot;)
HP_panicHangup = matches[2]
</script>
                <command></command>
                <packageName></packageName>
                <regex>^panic\shangup\s(.*)$</regex>
            </Alias>
            <Alias isActive="yes" isFolder="no">
                <name>Disable Trigger</name>
                <script>disableTrigger(matches[2])</script>
                <command></command>
                <packageName></packageName>
                <regex>^disable trigger (.*)$</regex>
            </Alias>
        </AliasGroup>
    </AliasPackage>
    <ActionPackage/>
    <ScriptPackage>
        <ScriptGroup isActive="yes" isFolder="yes">
            <name>MajorMud</name>
            <packageName></packageName>
            <script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------
</script>
            <eventHandlerList/>
            <Script isActive="yes" isFolder="no">
                <name>MM</name>
                <packageName></packageName>
                <script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------

maxHP = 0

registerAnonymousEventHandler(&quot;sysLoadEvent&quot;, &quot;Startup&quot;)

function Startup()
	if getMudletHomeDir():find(&quot;unhappy&quot;) then mystic()
	elseif getMudletHomeDir():find(&quot;ethereal&quot;) then cleric()
	elseif getMudletHomeDir():find(&quot;pile&quot;) then paladin()
	else ranger() end

	UIStartup()
	mapStartup()
	setTownGlobals()
	walkStartup()

	enableTrigger(&quot;check health&quot;)

	prevExp = 0
	totExp = 0
	magicPower = 0
end

function health(hp, ability)
	magicPower = ability

	if tonumber(hp) &lt;= HP_panic or tonumber(hp) &lt; 10 then
		Panic()
	end

	if tonumber(hp) &lt; HP_retreat and tonumber(hp) &gt; HP_panic then
		cecho(&quot;&lt;black:sky_blue&gt;RETREAT!&quot;)
		walkLoop_run = false
		doRetreat()
		send(&quot;rest&quot;)
		enableTrigger(&quot;healing&quot;)
		if autoEnterTrigger ~= nil then
			cecho(&quot;&lt;:DarkGreen&gt;Enabling &quot;..tostring(autoEnterTrigger))
			tableAutoEnter[autoEnterTrigger]()
		end
	end
	
	if CombatTimer then
		echo(&quot;Combat Timer expired\n&quot;) 
		HuntHold() 
	end

	if tonumber(hp) &gt; maxHP then maxHP = tonumber(hp) end
	HP = tonumber(hp)
	setGauge(&quot;HP&quot;, hp, maxHP, &quot;HP: &quot;..HP..&quot;/&quot;..maxHP)
	disableTimer(&quot;Heartbeat&quot;)
	enableTimer(&quot;Heartbeat&quot;)
end

function Panic()
	walkLoop_run = false
	if HP_panicHangup then
		disableTrigger(&quot;check health&quot;)
		disableTrigger(&quot;healing&quot;)
		disconnect()
		disableTimer(&quot;Heartbeat&quot;)
	else
		doRetreat()
	end
	enableTrigger(&quot;panic&quot;)
	cecho (&quot;&lt;:red&gt;PANIC!&quot;)
end

function doRetreat()
	if retreatSequence == &quot;i&quot; then 
		send(inverseDirection(last_movement)) 
		changeRoom(inverseDirection(last_movement))
	elseif retreatSequence ~= nil then
		send(retreatSequence)
		local retreats = split(retreatSequence,&quot;;&quot;)
		for k,v in pairs(retreats) do
			changeRoom(v)
		end  
	end
	retreatSequence = &quot;i&quot;
	disableTrigger(&quot;check health&quot;)
end</script>
                <eventHandlerList/>
            </Script>
            <ScriptGroup isActive="yes" isFolder="yes">
                <name>Towns</name>
                <packageName></packageName>
                <script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------
</script>
                <eventHandlerList/>
                <Script isActive="yes" isFolder="no">
                    <name>Routines</name>
                    <packageName></packageName>
                    <script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------

function enterArena(room,trigger)
	if isActive(&quot;check health&quot;,&quot;trigger&quot;) == 1 then
		prep()
		if current_room ~= room then gotoRoom(room) end
		enableTrigger(trigger)
		send(&quot;rest&quot;)
	else
		tempTimer(30,function (x) enterArena(room,trigger) end)
		echo(&quot;waiting to auto start\n&quot;)
	end
end

function prep()
	disableTrigger(&quot;huntHold&quot;)
	enableTrigger(&quot;Hunts&quot;)
	echo(&quot;hunting enabled\n&quot;)
	disableTrigger(&quot;healing&quot;)
	enableTrigger(&quot;check health&quot;)
	echo(&quot;health enabled\n&quot;)
	retreatSequence = &quot;i&quot;
	echo(&quot;retreat enabled\n&quot;)
	ignoreTimer = false
	HP_panicHangup = true
	echo(&quot;defaulted timer and hangup\n&quot;)
end

function unPrep()
	disableTrigger(&quot;Hunts&quot;)
	disableTrigger(&quot;huntHold&quot;)
	retreatSequence = &quot;i&quot;
	disableTimer(&quot;Combat&quot;)
	CombatTimer = false
	ignoreTimer = false
	echo(&quot;unpreped\n&quot;)
end

function HuntHold()
	CombatTimer = false
	disableTimer(&quot;Combat&quot;)
	disableTrigger(&quot;huntHold&quot;)
	enableTrigger(&quot;Hunts&quot;)
	enableTrigger(&quot;Name_Line&quot;)
	walkLoop_pause = false
	hideWindow(&quot;DAMAGE&quot;)
end

function Hunt(monster)
	walkLoop_pause = true
	disableTrigger(&quot;Name_Line&quot;)
	disableTrigger(&quot;Exit_Line&quot;)
	disableTrigger(&quot;Hunts&quot;)
	enableTrigger(&quot;huntHold&quot;)
	if preSpell ~= nil and preSpellCount == 4 then send(preSpell) preSpellCount = 0
	else preSpellCount = preSpellCount + 1 end
	if attackSeq == nil then send(&quot;attack &quot; .. string.trim(monster))
	else
		if attackSeq[attackNum]:sub(1,1) == &quot;i&quot; or attackSeq[attackNum]:sub(1,1) == &quot;c&quot; then
			tempTimer(2,function (x) stopMagic(monster) end) end
		send(attackSeq[attackNum]..&quot; &quot;..string.trim(monster))
		attackNum = attackNum + 1
		if attackNum &gt; table.size(attackSeq) then attackNum = 1 end
	end

	CombatTimer = false
	if not ignoreTimer then enableTimer(&quot;Combat&quot;) end
	showWindow(&quot;DAMAGE&quot;)
	damage = 0
	echo(&quot;DAMAGE&quot;,&quot;DAMAGE: &quot;..damage)
end

function stopMagic(monster)
	if isActive(&quot;huntHold&quot;,&quot;trigger&quot;) == 0 then return
	elseif magicPower &lt; minMagic then
		disableTrigger(&quot;huntHold&quot;)
		send(&quot;attack &quot;..monster)
		tempTimer(2,[[enableTrigger(&quot;huntHold&quot;)]])
	else
		tempTimer(2,function (x) stopMagic(monster) end)
	end
end

function AutoPrep()
	if (current_room == 690 or current_room == 286 or current_room == 937) and isActive(&quot;Hunts&quot;,&quot;trigger&quot;) == 0 then
		prep()
	elseif (current_room == 190 or current_room == 285 or current_room == 116) and isActive(&quot;Hunts&quot;,&quot;trigger&quot;) == 1 then
		unPrep()
	end
end</script>
                    <eventHandlerList/>
                </Script>
                <Script isActive="yes" isFolder="no">
                    <name>Variables</name>
                    <packageName></packageName>
                    <script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------

function setTownGlobals()
	CombatTimer = false
	ignoreTimer = false
	autoEnterTrigger = nil
	retreatSequence = &quot;i&quot;
	preSpellCount = 0
	attackNum = 1

	tableAutoEnter = {
		[&quot;newhaven&quot;] = function (x) enterArena(9,&quot;auto enter newhaven&quot;) end,
		[&quot;slums&quot;] = function (x) enterArena(289,&quot;auto Stroll Slums&quot;) end,
		[&quot;bear&quot;] = function (x) enterArena(9,&quot;auto enter bear&quot;) end,
		[&quot;bodyguard slums&quot;] = function (x) enterArena(427,&quot;auto Stroll Slums&quot;) end,
		[&quot;cave worm&quot;] = function (x) enterArena(656,&quot;autoStrollCaveWorm&quot;) end,
	}

	slums2Loop = { &quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;w&quot;,&quot;w&quot;,&quot;w&quot;,&quot;w&quot;,&quot;n&quot;,&quot;n&quot;,&quot;n&quot;,&quot;n&quot;,&quot;n&quot;,&quot;n&quot;,&quot;e&quot;,&quot;e&quot;,&quot;n&quot;,&quot;n&quot;,&quot;n&quot;,&quot;e&quot;,&quot;e&quot; }
	slumsLoop = { &quot;e&quot;,&quot;e&quot;,&quot;e&quot;,&quot;e&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;e&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;s&quot;,&quot;w&quot;,&quot;w&quot;,&quot;n&quot;,&quot;n&quot;,&quot;n&quot;,&quot;n&quot;,&quot;w&quot;,&quot;w&quot;,&quot;w&quot;,&quot;n&quot;,&quot;n&quot;,&quot;n&quot;,&quot;n&quot; }
	darkcavern3Loop = { &quot;nw&quot;,&quot;nw&quot;,&quot;w&quot;,&quot;s&quot;,&quot;n&quot;,&quot;e&quot;,&quot;se&quot;,&quot;se&quot;,&quot;s&quot;,&quot;s&quot;,&quot;sw&quot;,&quot;ne&quot;,&quot;n&quot;,&quot;n&quot; }
end</script>
                    <eventHandlerList/>
                </Script>
            </ScriptGroup>
            <ScriptGroup isActive="yes" isFolder="yes">
                <name>character_varibs</name>
                <packageName></packageName>
                <script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------
</script>
                <eventHandlerList/>
                <Script isActive="yes" isFolder="no">
                    <name>cleric</name>
                    <packageName></packageName>
                    <script>-------------------------------------------------
-- Definition of cleric specific variables.    --
-------------------------------------------------

function cleric()
--When should panic set in?
	HP_panic = 20

--Should I hang up of panic?
	HP_panicHangup = true

--When should I retreat from room?
	HP_retreat = 30

--When should I start using health spells?
	HP_healthSpell = 25

--Which health spells are available?
	HP_maheAvail = &quot;c mahe&quot;
	HP_miheAvail = &quot;c mihe&quot;

--Handle attacking	
	minMagic = 8
	attackSeq = { &quot;attack&quot;,&quot;c hamm&quot; }

--When can I automatically re-enter battle?
	HP_autoEnter = 45

	uname = &quot;etherealsilence&quot;

	echo(&quot;Using cleric varibs\n&quot;)
end</script>
                    <eventHandlerList/>
                </Script>
                <Script isActive="yes" isFolder="no">
                    <name>paladin</name>
                    <packageName></packageName>
                    <script>-------------------------------------------------
-- Definition of paladin specific variables.   --
-------------------------------------------------

function paladin()
--When should panic set in?
HP_panic = 20
--Should I hang up of panic?
HP_panicHangup = true
--When should I retreat from room?
HP_retreat = 30
--When should I start using health spells?
HP_healthSpell = 20
--Which health spells are available?
	HP_maheAvail = &quot;c mahe&quot;
	HP_miheAvail = &quot;c mihe&quot;
	preSpell = &quot;c chant&quot;

	minMagic = 8
	attackSeq = { &quot;c agon&quot;,&quot;attack&quot; }
--When can I automatically re-enter battle?
HP_autoEnter = 45

	uname = &quot;pileoworthless&quot;

	echo(&quot;Using paladin varibs\n&quot;)
end</script>
                    <eventHandlerList/>
                </Script>
                <Script isActive="yes" isFolder="no">
                    <name>Ranger</name>
                    <packageName></packageName>
                    <script>-------------------------------------------------
-- Definition of paladin specific variables.   --
-------------------------------------------------

function ranger()
--When should panic set in?
HP_panic = 20
--Should I hang up of panic?
HP_panicHangup = true
--When should I retreat from room?
HP_retreat = 30
--When should I start using health spells?
HP_healthSpell = 20
--Which health spells are available?
	--HP_maheAvail = &quot;c rhel&quot;
	HP_maheAvail = nil
	HP_miheAvail = &quot;c mend&quot;
	preSpell = nil
	
	minMagic = 8
	attackSeq = { &quot;c chao&quot;,&quot;bash&quot; }
--When can I automatically re-enter battle?
HP_autoEnter = 40

	uname = &quot;captain&quot;

	echo(&quot;Using ranger varibs\n&quot;)
end</script>
                    <eventHandlerList/>
                </Script>
                <Script isActive="yes" isFolder="no">
                    <name>Mystic</name>
                    <packageName></packageName>
                    <script>-------------------------------------------------
-- Definition of mystci specific variables.   --
-------------------------------------------------

function mystic()
--When should panic set in?
	HP_panic = 20
--Should I hang up of panic?
	HP_panicHangup = true
--When should I retreat from room?
	HP_retreat = 30
--When should I start using health spells?
	HP_healthSpell = 25
--Which health spells are available?
HP_maheAvail = &quot;invoke swan&quot;
HP_miheAvail = nil
	preSpell = &quot;invoke tiger&quot;
	attackSeq = { &quot;punch&quot;,&quot;attack&quot; }
--When can I automatically re-enter battle?
HP_autoEnter = 38

	uname = &quot;unhappy&quot;

	echo(&quot;Using mystic varibs\n&quot;)
end</script>
                    <eventHandlerList/>
                </Script>
                <Script isActive="yes" isFolder="no">
                    <name>Recon</name>
                    <packageName></packageName>
                    <script>function reConn()
	walkLoop_pause = true
	reconnect()
	tempTimer(4,[[send(&quot;]]..uname..[[&quot;)]])
	tempTimer(7.5,[[send(&quot;&quot;)]])
	tempTimer(9,[[send(&quot;c&quot;)]])
	tempTimer(9.5,[[send(&quot;m&quot;)]])
	tempTimer(10,[[send(&quot;e&quot;)]])
	tempTimer(10.2,[[send(&quot;c&quot;)]])
	disableTrigger(&quot;Name_Line&quot;) --prevent false movement on reconnect
	tempTimer(20,[[enableTrigger(&quot;Name_Line&quot;)]])
end
</script>
                    <eventHandlerList/>
                </Script>
            </ScriptGroup>
            <Script isActive="yes" isFolder="no">
                <name>UI</name>
                <packageName></packageName>
                <script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------

function UIStartup()
	WindowWidth, WindowHeight = getMainWindowSize();
	createConsole(&quot;chat&quot;, 9, 57, 20, WindowWidth-415,0)
	createGauge(&quot;HP&quot;, 100, 25, WindowWidth-520, 0, &quot;HEALTH&quot;, &quot;dark_green&quot;)
	createGauge(&quot;EXP&quot;, 100, 25, WindowWidth-520, 25, &quot;EXP&quot;, &quot;PaleTurquoise&quot;)
	createLabel(&quot;EXPpHR&quot;, WindowWidth-520, 50, 100, 25, 1)
	setBackgroundColor(&quot;EXPpHR&quot;, 218, 165, 32, 255)
	createLabel(&quot;DAMAGE&quot;, WindowWidth-520, 75, 100, 25, 1)
	setBackgroundColor(&quot;DAMAGE&quot;,254,186,173,255)
	hideWindow(&quot;DAMAGE&quot;)

	HBox = Geyser.HBox:new({name=&quot;HBox&quot;, x=WindowWidth-415, y=WindowHeight-400, width=400, height=400,})
	local mapper = Geyser.Mapper:new({name = &quot;mapper&quot;},HBox)
end

function resizeEvent( event, x, y )
	WindowWidth, WindowHeight = getMainWindowSize();
	-- move chat window
	moveWindow(&quot;chat&quot;,WindowWidth-415,0)
	if WindowHeight-400 &lt; 300 then resizeWindow(&quot;chat&quot;,400,WindowHeight-400) else resizeWindow(&quot;chat&quot;,400,300) end
	
	moveWindow(&quot;HP&quot;,WindowWidth-520,0)
	moveWindow(&quot;EXP&quot;,WindowWidth-520,25)
	moveWindow(&quot;EXPpHR&quot;,WindowWidth-520,50)
	moveWindow(&quot;DAMAGE&quot;,WindowWidth-520,75)

	HBox:move(WindowWidth-415,WindowHeight-400)
end

registerAnonymousEventHandler(&quot;sysWindowResizeEvent&quot;, &quot;resizeEvent&quot;)</script>
                <eventHandlerList/>
            </Script>
            <Script isActive="yes" isFolder="no">
                <name>mapping</name>
                <packageName></packageName>
                <script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------

mudlet = mudlet or {}; mudlet.mapper_script = true

registerAnonymousEventHandler(&quot;setPlayerLoc&quot;, &quot;setPlayerLocation&quot;)

function mapStartup()
	last_movement = nil
	current_room = nil
	manual_map = false
	auto_map = false
	walkCount = 0

	loadMap()
	addMapEvent(&quot;I'm Here&quot;, &quot;setPlayerLoc&quot;)
	echo(&quot;Default map loaded\n&quot;)
end

function setPlayerLocation(evet, list, rm)
	setRoom(rm)
	last_movement = nil
	enableTrigger(&quot;Name_Line&quot;)
	disableTrigger(&quot;Exit_Line&quot;)
end

function doSpeedWalk()
	if current_room == nil then echo(&quot;I don't know where I am\n&quot;) return end

	auto_map = false
	disableTrigger(&quot;Name_Line&quot;)
	echo(&quot;Path we need to take: &quot; .. table.concat(speedWalkDir, &quot;, &quot;) .. &quot;\n&quot;)
	echo(&quot;Rooms we'll pass through: &quot; .. table.concat(speedWalkPath, &quot;, &quot;) .. &quot;\n&quot;)
	local vSub = nil
	for i,v in ipairs(speedWalkDir) do
		if v:sub(1,1) == &quot;u&quot; or v:sub(1,1) == &quot;d&quot; then
			vSub = v:sub(1,1) --up and down come as full words
		else
			vSub = v
		end
		tempTimer(i * 1.5, [[send(&quot;]]..v..[[&quot;) changeRoom(&quot;]]..vSub..[[&quot;)]])
	end

	walkCount = 0
	amIspeedwalking(table.size(speedWalkPath))
	walkLoop_pause = true
end

function amIspeedwalking(walk_size)
	if walkCount ~= walk_size then
		tempTimer(2.5, [[amIspeedwalking(]]..walk_size..[[)]])
	else
		tempTimer(2, [[enableTrigger(&quot;Name_Line&quot;)]])
		walkLoop_pause = false
	end
end

function enteredRoom(room_name,area_name)
	if current_room == nil then
		local room_list = searchRoom(room_name)
		if table.size(room_list) == 1 then
			for rid,rname in pairs(room_list) do setLocation(rid) end
		else
			echo(&quot;I don't know where I am\n&quot;)
		end
	else
		exits = getRoomExits(current_room)
		if table.contains(exits,longDirection(last_movement)) then
			local rid = exits[longDirection(last_movement)]
			setRoom(rid)
			if getRoomName(rid) == &quot;&quot; then setRoomName(rid,room_name) end
		else 
			if auto_map or manual_map then
				createRoom(room_name,area_name)
			else
				echo(&quot; - Room not found\n&quot;)
			end
		end
	end
end

function createRoom(room_name,area_name)
	if area_name == nil then
		if current_room == nil then
			echo(&quot;can't find an area for the room\n&quot;)
			return
		else
			area_name = getRoomAreaName(getRoomArea(current_room))
		end
	else
		addAreaName(area_name)
		current_room = nil
	end

	pos_table = getRoomsByPosition(findAreaID(area_name),targetPosition())
	if table.size(pos_table) ~= 0 then
		rid = pos_table[0]
		setExit(rid,current_room,inverseDirection(last_movement))
		setExit(current_room,rid,last_movement)
		setRoom(rid)
		return
	end

	rid = createRoomID()
	addRoom(rid)
	setRoomName(rid,room_name)
	setRoomArea(rid,findAreaID(area_name))
	setRoomCoordinates(rid,targetPosition())

	if current_room ~= nil then
		setExit(rid,current_room,inverseDirection(last_movement))
		setExit(current_room,rid,last_movement)
	end

	setRoom(rid)
	echo(&quot;Room &quot;..room_name..&quot; (&quot;..rid..&quot;) created\n&quot;)
end

function changeRoom(direction)
	if direction:find(&quot;go&quot;) then
		local exits = getSpecialExits(current_room)
		for rid,command_table in pairs(exits) do
			for command,locked in pairs(command_table) do 
				if command:find(direction) then
					setRoom(rid)
					return
				end
			end
		end
		echo(&quot;No exit to the &quot;..direction..&quot;\n&quot;) -- if we get here, no exit found
	else
		local exits = getRoomExits(current_room)
		if table.contains(exits,longDirection(direction)) then
			local rid = exits[longDirection(direction)]
			setRoom(rid)
		else
			echo(&quot;No exit to the &quot;..longDirection(direction)..&quot;\n&quot;)
		end
	end
end

function setRoom(room_id)
	current_room = room_id
	centerview(room_id)
	AutoPrep()
end

function describeRoom(room_id)
	echo(&quot;Room &quot;..room_id..&quot; - &quot;..getRoomName(room_id)..&quot; in area &quot;..getRoomAreaName(getRoomArea(room_id))..&quot;\n&quot;)
end

function findRoom(room_name)
	local room_list = searchRoom(room_name)
	if table.size(room_list) ~= 0 then
		for rid,rname in pairs(room_list) do describeRoom(rid) end
	else
		echo(&quot;Room not found\n&quot;)
	end
end

function mapControl(inst)
	if inst == &quot;save&quot; then saveMap() echo(&quot;default map saved\n&quot;)
	elseif inst == &quot;load&quot; then loadMap() updateMap() echo(&quot;default map loaded\n&quot;)
	elseif inst:find(&quot;delete&quot;) ~= nil then
		if inst:find(&quot;all&quot;) ~= nil then
			local list = getAreaTable()
			for area, id in pairs(list) do
				deleteArea(id)
			end
			current_room = nil
			last_movement = nil
			echo(&quot;all map areas deleted\n&quot;)
		elseif inst:find(&quot;area&quot;) then
			aname = inst:sub(13,inst:len())
			aid = findAreaID(aname)
			if aid ~= nil then
				deleteArea(aid)
				echo(&quot;area &quot;..aname..&quot; deleted\n&quot;)
			else
				echo(&quot;area &quot;..aname..&quot; does not exist\n&quot;)
			end
		elseif inst:find(&quot;room&quot;) then
			rid = inst:sub(13,inst:len())
			if roomExists(rid) then
				deleteRoom(rid)
				echo(&quot;room &quot;..rid..&quot; deleted\n&quot;)
			else
				echo(&quot;room &quot;..rid..&quot; does not exist\n&quot;)
			end
		end
	elseif inst:find(&quot;create&quot;) ~= nil then
		if inst:find(&quot;area&quot;) ~= nil then
			aname = inst:sub(13,inst:len())
			createRoom(&quot;&quot;,aname)
			echo(&quot;area &quot;..aname..&quot; created\n&quot;)
		end
	elseif inst:find(&quot;describe&quot;) ~= nil then
		if inst:find(&quot;room&quot;) ~= nil then
			rid = inst:sub(15,inst:len())
			if roomExists(rid) then describeRoom(rid)
			else echo(&quot;room &quot;..rid..&quot; does not exist\n&quot;) end
		end
	elseif inst:find(&quot;rename&quot;) ~= nil then
		if inst:find(&quot;room&quot;) ~= nil then
			rname = inst:sub(13,inst:len())
			if current_room ~= nil then setRoomName(current_room,rname) describeRoom(current_room)
			else echo(&quot;I don't know where I am.\n&quot;) end
		end
	elseif inst:find(&quot;find&quot;) ~= nil then
		if inst:find(&quot;room&quot;) ~= nil then findRoom(inst:sub(11,inst:len())) end
	elseif inst:find(&quot;where am i&quot;) then
		if current_room ~= nil then describeRoom(current_room)
		else echo(&quot;I don't know where I am.\n&quot;) end
	elseif inst:find(&quot;goto&quot;) ~= nil then gotoRoom(inst:sub(6,inst:len()))
	elseif inst == &quot;manual on&quot; then manual_map = true auto_map = false echo(&quot;manual mapping enabled\n&quot;)
	elseif inst == &quot;manual off&quot; then manual_map = false echo(&quot;manual mapping disabled\n&quot;)
	elseif inst == &quot;auto on&quot; then auto_map = true manual_map = false echo(&quot;auto mapping enabled\n&quot;)
	elseif inst == &quot;auto off&quot; then auto_map = false echo(&quot;auto mapping disabled\n&quot;)
	else echo(&quot;Map command not found\n&quot;)
	end
end

function inverseDirection(direction)
	if direction == &quot;n&quot; then return &quot;s&quot;
	elseif direction == &quot;s&quot; then return &quot;n&quot;
	elseif direction == &quot;e&quot; then return &quot;w&quot;
	elseif direction == &quot;w&quot; then return &quot;e&quot;
	elseif direction == &quot;ne&quot; then return &quot;sw&quot;
	elseif direction == &quot;nw&quot; then return &quot;se&quot;
	elseif direction == &quot;se&quot; then return &quot;nw&quot;
	elseif direction == &quot;sw&quot; then return &quot;ne&quot;
	elseif direction == &quot;u&quot; then return &quot;d&quot;
	elseif direction == &quot;d&quot; then return &quot;u&quot;
	end
end

function longDirection(direction)
	if direction == &quot;n&quot; then return &quot;north&quot;
	elseif direction == &quot;s&quot; then return &quot;south&quot;
	elseif direction == &quot;e&quot; then return &quot;east&quot;
	elseif direction == &quot;w&quot; then return &quot;west&quot;
	elseif direction == &quot;ne&quot; then return &quot;northeast&quot;
	elseif direction == &quot;nw&quot; then return &quot;northwest&quot;
	elseif direction == &quot;se&quot; then return &quot;southeast&quot;
	elseif direction == &quot;sw&quot; then return &quot;southwest&quot;
	elseif direction == &quot;u&quot; then return &quot;up&quot;
	elseif direction == &quot;d&quot; then return &quot;down&quot;
	end
end

function targetPosition()
	if current_room == nil then
		return 0,0,0
	else
		x,y,z = getRoomCoordinates(current_room)

		if last_movement:find(&quot;n&quot;) ~= nil then y = y + 2 end
		if last_movement:find(&quot;s&quot;) ~= nil then y = y - 2 end
		if last_movement:find(&quot;e&quot;) ~= nil then x = x + 2 end
		if last_movement:find(&quot;w&quot;) ~= nil then x = x - 2 end
		if last_movement:find(&quot;u&quot;) ~= nil then z = z + 1
		elseif last_movement:find(&quot;d&quot;) ~= nil then z = z - 1
		end

		return x,y,z
	end
end

function findAreaID(areaname)
  local list = getAreaTable()
 
  -- iterate over the list of areas, matching them with substring match. 
  -- if we get match a single area, then return it's ID, otherwise return
  -- 'false' and a message that there are than one are matches
  local returnid, fullareaname
  for area, id in pairs(list) do
    if area == areaname then
      if returnid then return false, &quot;more than one area matches&quot; end
      returnid = id; fullareaname = area
    end
  end
 
  return returnid, fullareaname
end

function split(str,c)
	local aCount = 0
	local array = {}
	local a = string.find(str, c)

	while a do
		array[aCount] = string.sub(str, 1, a - 1)

		aCount = aCount + 1
		array[aCount] = string.sub(str, a + 1, string.len(str))
		a = string.find(array[aCount], c)
		str = array[aCount]
	end
	return array
end</script>
                <eventHandlerList/>
            </Script>
            <Script isActive="yes" isFolder="no">
                <name>AutoWalk</name>
                <packageName></packageName>
                <script>-------------------------------------------------
--         Put your Lua functions here.        --
--                                             --
-- Note that you can also use external Scripts --
-------------------------------------------------

function walkStartup()
	walkLoop_run = false --keep stepping through loop
	walkLoop_pause = false --temporarily stop running steps
	walkLoop_count = 1 --current step

	roamDirection = nil --direction to roam
end

function walkLoop(loop,time)
	if walkLoop_run and not walkLoop_pause and HP &gt; HP_autoEnter then
		cecho(&quot;&lt;lawn_green&gt;Walk loop &quot;..loop[walkLoop_count]..&quot;\n&quot;)
		send(loop[walkLoop_count]..&quot;;rest&quot;) 
		last_movement = loop[walkLoop_count]
		walkLoop_count = walkLoop_count + 1
		if walkLoop_count &gt; table.size(loop) then walkLoop_count =  1 end
		changeRoom(last_movement)
		enableTimer(&quot;backtrack&quot;)
	end
 
	if walkLoop_run then
		disableTrigger(&quot;Name_Line&quot;)
		tempTimer(time, function (x) walkLoop(loop,time) end)
	else
		enableTrigger(&quot;Name_Line&quot;)
	end
end

function roam(exits)
	if roamDirection == nil then return end
		local found = false
		local availExits = split(exits,&quot; &quot;)
		for k,v in pairs(availExits) do
			local littleExit = v:sub(1,1)
			if littleExit == &quot;n&quot; or littleExit == &quot;s&quot; then
				if v:find(&quot;e&quot;) then
					littleExit = littleExit..&quot;e&quot;
				elseif v:find(&quot;w&quot;) then
					littleExit = littleExit..&quot;w&quot;
				end
			end
			if littleExit == roamDirection then found = true end
		end

		if found then
			tempTimer(5, [[doRoam()]])
		else
			roamDirection = inverseDirection(roamDirection)
			tempTimer(5, [[doRoam()]])
		end	
end

function doRoam()
	if roamDirection == nil then return end

	if walkLoop_pause then
		tempTimer(5,[[doRoam()]])
	else
		cecho(&quot;&lt;lawn_green&gt;Roam &quot;..roamDirection..&quot;\n&quot;)
		send(roamDirection) 
		last_movement = roamDirection
		enableTimer(&quot;backtrack&quot;)
	end
end</script>
                <eventHandlerList/>
            </Script>
        </ScriptGroup>
    </ScriptPackage>
    <KeyPackage>
        <Key isActive="yes" isFolder="no">
            <name>Disconnect</name>
            <packageName></packageName>
            <script>disconnect()</script>
            <command></command>
            <keyCode>16777264</keyCode>
            <keyModifier>0</keyModifier>
        </Key>
        <Key isActive="yes" isFolder="no">
            <name>Recon</name>
            <packageName></packageName>
            <script>reConn()</script>
            <command></command>
            <keyCode>16777275</keyCode>
            <keyModifier>0</keyModifier>
        </Key>
        <Key isActive="yes" isFolder="no">
            <name>Gossip</name>
            <packageName></packageName>
            <script>printCmdLine(&quot;gos &quot;)</script>
            <command></command>
            <keyCode>39</keyCode>
            <keyModifier>0</keyModifier>
        </Key>
    </KeyPackage>
</MudletPackage>
